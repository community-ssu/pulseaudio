From beb2702ad8bde33e9a1653ffd227bdc6b87e7703 Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Marc-Andr=C3=A9=20Lureau?= <marc-andre.lureau@nokia.com>
Date: Tue, 24 Mar 2009 14:07:51 +0200
Subject: [PATCH 12/32] bluetooth: connected can be -1, check > 0

---
 src/modules/bluetooth/module-bluetooth-discover.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/src/modules/bluetooth/module-bluetooth-discover.c b/src/modules/bluetooth/module-bluetooth-discover.c
index 4805e5f..3a7b20b 100644
--- a/src/modules/bluetooth/module-bluetooth-discover.c
+++ b/src/modules/bluetooth/module-bluetooth-discover.c
@@ -91,7 +91,7 @@ static pa_hook_result_t load_module_for_device(pa_bluetooth_discovery *y, const
 
             /* Oh, awesome, a new device has shown up and been connected! */
 
-            args = pa_sprintf_malloc("address=\"%s\" path=\"%s\" profile=\"%s\"", d->address, d->path, d->headset_connected ? "hsp" : "a2dp");
+            args = pa_sprintf_malloc("address=\"%s\" path=\"%s\" profile=\"%s\"", d->address, d->path, d->headset_connected > 0 ? "hsp" : "a2dp");
 
 #ifdef NOKIA
             if (pa_modargs_get_value(u->modargs, "sco_sink", NULL) &&
-- 
1.6.2.rc1.13.gfd76c.dirty

