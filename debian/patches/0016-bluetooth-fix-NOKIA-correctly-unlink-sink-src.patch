From 7bcb5811ac829711ec977c7da8a7b9e24165f77c Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Marc-Andr=C3=A9=20Lureau?= <marc-andre.lureau@nokia.com>
Date: Tue, 24 Mar 2009 16:28:12 +0200
Subject: [PATCH 16/32] bluetooth: fix #NOKIA, correctly unlink sink/src

---
 src/modules/bluetooth/module-bluetooth-device.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/modules/bluetooth/module-bluetooth-device.c b/src/modules/bluetooth/module-bluetooth-device.c
index 302bfa8..0b8bbde 100644
--- a/src/modules/bluetooth/module-bluetooth-device.c
+++ b/src/modules/bluetooth/module-bluetooth-device.c
@@ -1729,16 +1729,16 @@ static int card_set_profile(pa_card *c, pa_card_profile *new_profile) {
         inputs = pa_sink_move_all_start(u->sink);
 #ifdef NOKIA
         if (!USE_SCO_OVER_PCM(u))
-            pa_sink_unlink(u->sink);
 #endif
+            pa_sink_unlink(u->sink);
     }
 
     if (u->source) {
         outputs = pa_source_move_all_start(u->source);
 #ifdef NOKIA
         if (!USE_SCO_OVER_PCM(u))
-            pa_source_unlink(u->source);
 #endif
+            pa_source_unlink(u->source);
     }
 
     stop_thread(u);
-- 
1.6.2.rc1.13.gfd76c.dirty

