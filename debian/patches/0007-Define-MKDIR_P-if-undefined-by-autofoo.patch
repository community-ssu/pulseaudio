From 0f006b1e4468ed0d41cd6b0b0a80e29ecf84eeab Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Marc-Andr=E9=20Lureau?= <marcandre.lureau@gmail.com>
Date: Wed, 30 Jul 2008 18:13:04 +0300
Subject: [PATCH] Define MKDIR_P if undefined by autofoo

---
 src/Makefile.am |   12 +++---------
 1 files changed, 3 insertions(+), 9 deletions(-)

diff --git a/src/Makefile.am b/src/Makefile.am
index 2775dfb..edbae38 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -41,6 +41,8 @@ else
 PA_DEFAULT_CONFIG_DIR=$(pulseconfdir)
 endif
 
+MKDIR_P ?= mkdir
+
 ###################################
 #     Compiler/linker flags       #
 ###################################
@@ -1008,7 +1010,6 @@ libavahi_wrap_la_LIBADD = $(AM_LIBADD) $(AVAHI_CFLAGS) libpulsecore.la
 ###################################
 
 modlibexec_LTLIBRARIES += \
-		module-flat-volume.la \
 		module-cli.la \
 		module-cli-protocol-tcp.la \
 		module-simple-protocol-tcp.la \
@@ -1204,8 +1205,7 @@ SYMDEF_FILES = \
 		modules/module-bt-proximity-symdef.h \
 		modules/gconf/module-gconf-symdef.h \
 		modules/module-position-event-sounds-symdef.h \
-		modules/module-console-kit-symdef.h \
-		modules/module-flat-volume-symdef.h
+		modules/module-console-kit-symdef.h
 
 EXTRA_DIST += $(SYMDEF_FILES)
 BUILT_SOURCES += $(SYMDEF_FILES)
@@ -1216,12 +1216,6 @@ $(SYMDEF_FILES): modules/module-defs.h.m4
 	$(MKDIR_P) modules/rtp
 	$(M4) -Dfname="$@" $< > $@
 
-# Flat volume
-
-module_flat_volume_la_SOURCES = modules/module-flat-volume.c
-module_flat_volume_la_LDFLAGS = -module -avoid-version
-module_flat_volume_la_LIBADD = $(AM_LIBADD) libpulsecore.la
-
 # Simple protocol
 
 module_simple_protocol_tcp_la_SOURCES = modules/module-protocol-stub.c
