From 3049552544a8e6b4060ff709e27277811dac5c6d Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Marc-Andr=C3=A9=20Lureau?= <marc-andre.lureau@nokia.com>
Date: Fri, 24 Apr 2009 15:33:05 +0300
Subject: [PATCH 39/41] alsa-sink-old: FIXME workaround sink.hw1 drain..

---
 src/modules/alsa/module-alsa-sink-old.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/src/modules/alsa/module-alsa-sink-old.c b/src/modules/alsa/module-alsa-sink-old.c
index d46a255..90a1eb6 100644
--- a/src/modules/alsa/module-alsa-sink-old.c
+++ b/src/modules/alsa/module-alsa-sink-old.c
@@ -419,7 +419,8 @@ static int suspend(struct userdata *u) {
     pa_assert(u->pcm_handle);
 
     /* Let's suspend */
-    snd_pcm_drain(u->pcm_handle);
+    if (!pa_streq(u->device_name, "sink.hw1"))
+        snd_pcm_drain(u->pcm_handle);
     snd_pcm_close(u->pcm_handle);
     u->pcm_handle = NULL;
 
-- 
1.6.2.4

