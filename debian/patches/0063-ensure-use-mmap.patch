From 1a3b77834ded3c578c53f7b7b757083fe7840e79 Mon Sep 17 00:00:00 2001
From: Juho Hamalainen <jusa@IT-W1767.(none)>
Date: Mon, 8 Jun 2009 13:52:13 +0300
Subject: [PATCH 63/70] ensure use mmap

---
 src/modules/alsa/module-alsa-sink-old.c   |    2 +-
 src/modules/alsa/module-alsa-source-old.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/modules/alsa/module-alsa-sink-old.c b/src/modules/alsa/module-alsa-sink-old.c
index 6a5c863..c72b49c 100644
--- a/src/modules/alsa/module-alsa-sink-old.c
+++ b/src/modules/alsa/module-alsa-sink-old.c
@@ -758,7 +758,7 @@ static int initialize_sink(struct userdata *u) {
     const pa_alsa_profile_info *profile;
 
     d = FALSE; /* use_tsched */
-    use_mmap = u->use_mmap;
+    use_mmap = b = u->use_mmap;
     nfrags = u->nfragments;
     period_size = u->period_size;
     ss = u->sink->sample_spec;
diff --git a/src/modules/alsa/module-alsa-source-old.c b/src/modules/alsa/module-alsa-source-old.c
index e5e3958..697da8a 100644
--- a/src/modules/alsa/module-alsa-source-old.c
+++ b/src/modules/alsa/module-alsa-source-old.c
@@ -989,7 +989,7 @@ static int initialize_source(struct userdata *u) {
     pa_bool_t use_mmap = TRUE, b, d, ignore_dB = FALSE;
     const pa_alsa_profile_info *profile;
 
-    use_mmap = u->use_mmap;
+    use_mmap = b = u->use_mmap;
     nfrags = u->nfragments;
 
     ss = u->source->sample_spec;
-- 
1.6.3.1

